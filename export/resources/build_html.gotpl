<!DOCTYPE html>
<html>
	<style>
		.table {
			display: table;
			width: 95%;
			margin-left: auto;
			margin-right: auto;
		}
		.tableHead {
			display: table-cell;
			padding: 3px 10px;
			border: 1px solid #999999;
			font-weight: bold;
		}
		.tableRow {
			display: table-row;
		}
		.tableCell {
			display: table-cell;
			padding: 3px 10px;
			border: 1px solid #999999;
		}
		.container {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(100px, 120px));
			grid-gap: 0.5em;
		}
		.part {
			border: 1px solid;
		}
	</style>
	<head>
		<meta charset="UTF-8">
		<title>Building {{.ID}} - {{.Name}}</title>
	</head>
	<body>
		<h1>Building {{.ID}} - {{.Name}}</h1>
			Provided parts: {{.CountProvidedParts}}
			<br/>
			Missing parts: {{.CountMissingParts}}

		<h2>Existing Parts</h2>
		<div class="table">
			<div class="tableRow">
				<div class="tableHead" style="width: 100px">Original Parts</div>
				<div class="tableHead">Substitutes</div>
			</div>
			{{range $partEntryMapping := .Parts}}
			<div class="tableRow">
				<div class="tableCell">
					<div>
						<a href="{{$partEntryMapping.Original.Part.PartURL}}">
							<center><img src="{{$partEntryMapping.Original.Part.ImageURL}}" title="{{$partEntryMapping.Original.Part.Name}}, {{$partEntryMapping.Original.Color.Name}}" alt="{{$partEntryMapping.Original.Part.Name}}, {{$partEntryMapping.Original.Color.Name}}" width="100" height="100"/></center>
							<br/>
							<center>{{$partEntryMapping.Original.Quantity}} x {{$partEntryMapping.Original.Part.Number}}</center>
						</a>
					</div>
			</div>
				<div class="tableCell">
					<div class="container">
						{{range $partEntry := $partEntryMapping.Substitutes}}
						<div>
							<a href="{{$partEntry.Part.PartURL}}">
								<center><img src="{{$partEntry.Part.ImageURL}}" title="{{$partEntry.Part.Name}}, {{$partEntry.Color.Name}}" alt="{{$partEntry.Part.Name}}, {{$partEntry.Color.Name}}" width="100" height="100"/></center>
								<br/>
								<center>{{$partEntry.Quantity}} x {{$partEntry.Part.Number}}</center>
							</a>
						</div>
						{{end}}
					</div>
				</div>
			</div>
			{{end}}
		</div>

		{{if (.HasMissingParts)}}
		<h2>Missing Parts</h2>
		<div class="container" style="width: 95%; margin-left: auto; margin-right: auto;">{{range $partEntryMapping := .Parts}}{{if (gt $partEntryMapping.Quantity 0)}}
			<div class="part">
				<a href="{{$partEntryMapping.Original.Part.PartURL}}">
					<center><img src="{{$partEntryMapping.Original.Part.ImageURL}}" title="{{$partEntryMapping.Original.Part.Name}}, {{$partEntryMapping.Original.Color.Name}}" alt="{{$partEntryMapping.Original.Part.Name}}, {{$partEntryMapping.Original.Color.Name}}" width="100" height="100"/></center>
					<br/>
					<center style="margin-bottom: 5px">{{$partEntryMapping.Quantity}} x {{$partEntryMapping.Original.Part.Number}}</center>
				</a>
			</div>{{end}}{{end}}
		</div>
		{{end}}
	</body>
</html>
