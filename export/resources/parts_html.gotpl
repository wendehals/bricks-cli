<!DOCTYPE html>
<html>
	<style>
		.container {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(100px, 120px));
			grid-gap: 0.5em;
			width: 95%;
			margin-left: auto;
			margin-right: auto;
		}
		.part {
			display: block;
			border: 1px solid;
			border-color: lightgrey;
			padding: 3px;
		}
		.image {
			position: relative;
			text-align: center;
		}
		.top-right {
			position: absolute;
			top: 0px;
			right: 3px;
			background-color: white;
			color: darkcyan;
			border: 1px solid;
			padding-left: 3px;
			padding-right: 3px;
		}
		.caption {
			text-align: center;
		}
	</style>

	<head>
		<meta charset="UTF-8">
		<title>Parts Collection</title>
	</head>

	<body>
		<h1>Parts</h1>
			<p>Total number of parts: {{.CountParts}}
			<p>Total Number of distinct part: {{len .Parts}}</p>

		<h2>Existing Parts</h2>
		
			<div class="container">
			{{- range $index, $element := .Parts}}
				{{- if (gt $element.Quantity 0)}}
				<div class="part">
					<div class="image">
						<div>
							<a href="{{$element.Part.PartURL}}">
								<img src="{{$element.Part.ImageURL}}" title="{{$element.Part.Name}}, {{$element.Color.Name}}" alt="{{$element.Part.Name}}" width="100" height="100"/>
							</a>
						</div>
						{{- if not (eq $element.Part.Dimensions "")}}
						<div class="top-right">{{$element.Part.Dimensions}}</div>
						{{- end}}
					</div>
					<div class="caption">{{$element.Quantity}} x {{$element.Part.Number}}</div>
					<div class="caption">{{$element.Color.Name}}</div>
				</div>
				{{- end}}
			{{- end}}
			</div>

		{{if (.HasMissingParts)}}
		<h2>Missing Parts</h2>

			<div class="container">
			{{- range $index, $element := .Parts}}
				{{- if (lt $element.Quantity 0)}}
				<div class="part">
					<div class="image">
						<div>
							<a href="{{$element.Part.PartURL}}">
								<img src="{{$element.Part.ImageURL}}" title="{{$element.Part.Name}}, {{$element.Color.Name}}" alt="{{$element.Part.Name}}" width="100" height="100"/>
							</a>
						</div>
						{{- if not (eq $element.Part.Dimensions "")}}
						<div class="top-right">{{$element.Part.Dimensions}}</div>
						{{- end}}
					</div>
					<div class="caption">{{abs $element.Quantity}} x {{$element.Part.Number}}</div>
					<div class="caption">{{$element.Color.Name}}</div>
				</div>
				{{- end}}
			{{- end}}
			</div>

		{{- end}}
	</body>
</html>
